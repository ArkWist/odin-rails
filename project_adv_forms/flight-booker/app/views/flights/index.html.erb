<h1>Flights</h1>

<%= form_tag(flights_path, method: :get) do %>

  <%= label_tag "From" %>
  <%= collection_select :flight, :origin, Airport.all, :code, :code %>
  
  <%= label_tag "To" %>
  <%= collection_select :flight, :destination, Airport.all, :code, :code %>

  <%= label_tag "Passengers" %>
  <%= select :booking, :passengers, @passengers %>
  
  <%= label_tag "Date" %>
  <%= select :flight, :date, @dates %>
  
  <%= submit_tag "Search" %>
  
<% end %>

<% if @flights %>
  <%= form_tag(bookings_path, method: :post) do %>
    <table>
      
      <thead>
        <th></th>
        <th>Departing</th>
        <th>Arriving</th>
        <th>Date</th>
        <th>Time</th>
        <th>Duration</th>
      </thead>
      
      <% @flights.each do |flight| %>
        <td><%= radio_button_tag :flight_id, flight.id %></td>
        <td><%= flight.origin.code %></td>
        <td><%= flight.destination.code %></td>
        <td><%= flight.date_formatted %></td>
        <td><%= flight.time_formatted %></td>
        <td><%= flight.duration_formatted %></td>
      <% end %>
      
    </table>
    <%= submit_tag "Select" %>
  <% end %>
<% end %>
